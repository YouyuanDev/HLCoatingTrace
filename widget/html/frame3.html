<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>统计</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
      <link rel="stylesheet" type="text/css" href="../css/mobiscroll.custom-3.0.0-beta6.min.css" />
    <style>
    </style>
</head>
<body>
  <div class="form-content" id="content" style="top:0px;">
      <div class="form-item">
        <div class="form-item-lbl">
            <label class="i18n1" name="projectno"></label>
        </div>
          <div class="form-item-val">
              <select class="model-select" id="projectInfoSelect" onchange="reloadInfoByProjectNo()">
             </select>
          </div>
      </div>
      <div class="form-item">
        <div class="form-item-lbl">
            <label class="i18n1" name="millno"></label>
        </div>
          <div class="form-item-val">
              <select class="model-select" id="millInfoSelect" onchange="reloadInfoByMillNo()">
             </select>
          </div>
      </div>
      <div class="form-item">
        <div class="form-item-lbl">
            <label class="i18n1" name="operationtime"></label>
        </div>
        <div class="form-item-val">
            <input class="mob-datetime1" type="text" name="operation_time" onchange="reloadInfoByTime()"/>
        </div>
      </div>
  </div>

</body>
</html>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../script/common.js"></script>
<script src="../script/jquery.i18n.properties-1.0.9.js" type="text/javascript"></script>
<script src="../script/language.js" type="text/javascript"></script>
<script src="../script/mobiscroll.custom-3.0.0-beta6.min.js" type="text/javascript"></script>
<script type="text/javascript">
    apiready = function() {
        //获取项目编号集合
        RequireProjectNo();
        //获取分厂编号集合
        RequireMillNo();
        hlLanguage("../i18n/");
        setControls();
    }
    function RequireProjectNoOK(data) {
        $('#projectInfoSelect').empty();
        for (var i = 0; i < data.length; i++) {
            if (i == 0)
                $('#projectInfoSelect').append('<option value=' + data[i].project_no + ' selected="selected">' + data[i].project_name + '</option>');
            else
                $('#projectInfoSelect').append('<option value=' + data[i].project_no + '>' + data[i].project_name + '</option>');
        }
    }
    function RequireProjectNoFail() {
        api.alert({
            msg: "获取项目编号时出错!"
        });
        closeWindowNoPipeNo();
    }
    function reloadInfoByProjectNo() {

    }
    function reloadInfoByMillNo() {

    }
    function reloadInfoByTime(){
      //  alert($('.mob-datetime1').val());
    }
    function RequireMillNo() {
      //发出请求
      var s = 'http://' + serverIP + '/millInfo/getAllMillsInfo.action';
      api.ajax({
          url: s,
          method: 'post',
          timeout: 30,
          dataType: 'json',
          data: {}
      }, function(ret, err) {
          if (ret) {
            if(ret.success){
               var data=ret.millinfo;
               $('#millInfoSelect').empty();
               for (var i = 0; i < data.length; i++) {
                  $('#millInfoSelect').append('<option value=' + data[i].mill_no + '>' + data[i].mill_name + '</option>');
               }
            }
          } else {
              api.alert({
                  msg: JSON.stringify(err)
              });
          }
          //closeWindowNoPipeNo();
      });
    }
</script>
